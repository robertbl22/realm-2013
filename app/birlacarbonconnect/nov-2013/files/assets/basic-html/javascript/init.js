PUBL=!1;
var browser={name:"",prefix:"",isIE:!1,versionIE:"",supportHTML5:!0,isFlash:!1,detect:function(){browser.checkFlash();var c=navigator.userAgent.toLowerCase().match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0];browser.name="version"==c[1]?c[3]:c[1];switch(browser.name){case "safari":browser.prefix="Webkit";break;case "firefox":browser.prefix="Moz";break;case "opera":browser.prefix="O";break;case "ie":browser.prefix="ms";browser.isIE=
!0;if(document.all&&!document.querySelector)browser.supportHTML5=!1,browser.versionIE=7;if(document.all&&document.querySelector&&!document.getElementsByClassName)browser.supportHTML5=!1,browser.versionIE=8;if(document.all&&document.querySelector&&document.getElementsByClassName&&!window.atob)browser.versionIE=9;if(document.all&&document.querySelector&&document.getElementsByClassName&&window.atob)browser.versionIE=10,browser.prefix="ms";break;case "chrome":browser.prefix="Webkit";break;case "unknown":browser.prefix=
"webkit"}},checkFlash:function(){var c=0,b=null;if("undefined"!=typeof navigator.plugins&&"object"==typeof navigator.plugins["Shockwave Flash"]){if((b=navigator.plugins["Shockwave Flash"].description)&&!("undefined"!=typeof navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]&&!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin))b=b.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),c=parseInt(b.replace(/^(.*)\..*$/,"$1"),10)}else if("undefined"!=typeof window.ActiveXObject)try{var a=
new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(a&&(b=a.GetVariable("$version")))b=b.split(" ")[1].split(","),c=parseInt(b[0],10)}catch(d){}if(0!=c)browser.isFlash=!0}},workspace={w:1200,h:800,listeners:[],addListener:function(c){workspace.listeners.push(c)},getSize:function(){browser.supportHTML5?(workspace.w=window.innerWidth?window.innerWidth:workspace.w,workspace.h=window.innerHeight?window.innerHeight:workspace.h):(workspace.w=document.documentElement.clientWidth?document.documentElement.clientWidth:
workspace.w,workspace.h=document.documentElement.clientHeight?document.documentElement.clientHeight:workspace.h)},callFn:function(){for(var c=0;c<workspace.listeners.length;c++)workspace.listeners[c].call(this)}},blackBG={listeners:[],create:function(c){var c=c||!1,b=document.createElement("div");b.id="blackBG";b.style.width=workspace.w+"px";b.style.height=workspace.h+"px";b.style.position="fixed";b.style.top="0px";b.style.left="0px";b.style.display="block";b.style.zIndex="1000000";browser.supportHTML5?
b.style.backgroundColor="rgba(0,0,0,0.7)":b.style.background="url('./style/bg_opacity.png')";setEvent(b,"click",blackBG.remove);if(c)c=document.createElement("div"),c.className="closeBG",b.appendChild(c);workspace.addListener(blackBG.resize);document.getElementById("bodyBg").parentNode.appendChild(b)},addListener:function(c){this.listeners.push(c)},remove:function(c){var b=document.getElementById("blackBG");b.parentNode.removeChild(b);for(b=0;b<blackBG.listeners.length;b++)blackBG.listeners[b].call(this);
c.preventDefault?c.preventDefault():c.returnValue=!1;c.stopPropagation?c.stopPropagation():c.returnValue=!1},resize:function(){if(document.getElementById("blackBG")){var c=document.getElementById("blackBG");c.style.width=workspace.w+"px";c.style.height=workspace.h+"px"}}},notification={noFlash:!1,show:function(){if(-1!=window.location.hash.indexOf("noFlash")){notification.noFlash=!0;blackBG.create();var c="",c=""!=PublicationTypeUrl?'<a id="pblType" href="'+PublicationTypeUrl+'" style="text-decoration: none; color: black;">'+
LOCALS[PublicationTypeName.toUpperCase()]+"</a>":LOCALS[PublicationTypeName.toUpperCase()],b=document.getElementById("blackBG");b.innerHTML='<div id="flash-notification" style="width:600px; min-height:200px;  margin: auto; position: relative; top: 30%; padding: 18px; overflow: hidden; background-color: rgb(255, 255, 255); border: 1px solid rgb(200, 200, 200); border-radius: 7px; font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: 14px; font-family: Arial; position: relative; background-position: initial initial; background-repeat: initial initial; -webkit-box-shadow: 0px 3px 10px rgba(0,0,0,.8);-moz-box-shadow: 0px 3px 10px rgba(0,0,0,.8); box-shadow: 0px 3px 10px rgba(0,0,0,.8);"><a id="closeButton" href="javascript:void();" style="display:block;width:30px;height:30px;text-decoration:none;font:0/0 a;cursor:pointer;background:url(style/close.png);position:absolute;top:5px;right:5px;left:auto;bottom:auto;"></a><div style="display:block;cursor:pointer;min-width:50px;min-height:50px;display:block;float:left;text-decoration:none;margin:10px 28px 10px 10px; "><img id="noteImage" onload="notification.animated(this);"  style="-webkit-box-shadow: 0px 3px 10px rgba(0,0,0,.5);-moz-box-shadow: 0px 3px 10px rgba(0,0,0,.5); box-shadow: 0px 3px 10px rgba(0,0,0,.5);" src="'+
COVER_SRC+'"></div><div id="noteText" style="margin-left: 128px;"><h3 style="font-weight:bold;padding: 14px 10px 10px 10px; font-size:18px; margin-right: 20px;line-height: 22px;">'+TITLE+'</h3><div style="padding: 10px;">'+LOCALS.NOTIFICATION_TEXT.replace("{0}",c)+'</div><a id="getFlash" href="http://get.adobe.com/flashplayer/" style="display:block;text-decoration:none;margin:15px 10px 0 10px;" target="_blank"><img src="http://www.adobe.com/macromedia/style_guide/images/160x41_Get_Flash_Player.jpg" alt="" border="0" style="border:0;display:block;" width="160" height="41"></a></div></div>';
browser.supportHTML5?b.addEventListener("DOMContentLoaded",notification.eventFn(),!1):b.attachEvent("onDOMContentLoaded",notification.eventFn)}},eventFn:function(){var c=document.getElementById("flash-notification");setEvent(c,"click",function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;a.stopPropagation?a.stopPropagation():a.returnValue=!1});setEvent(c.childNodes[0],"click",function(a){blackBG.remove(a);a.preventDefault?a.preventDefault():a.returnValue=!1;a.stopPropagation?a.stopPropagation():
a.returnValue=!1});var b=function(a){window.location.replace(FULL_SRC);a.preventDefault?a.preventDefault():a.returnValue=!1;a.stopPropagation?a.stopPropagation():a.returnValue=!1};c.getElementsByTagName("img")&&setEvent(c.getElementsByTagName("img")[0].parentNode,"click",b);c=function(a){window.open(PublicationTypeUrl);a.preventDefault?a.preventDefault():a.returnValue=!1;a.stopPropagation?a.stopPropagation():a.returnValue=!1};document.getElementById("pblType")&&setEvent(document.getElementById("pblType"),
"click",c);c=document.getElementById("getFlash");setEvent(c.childNodes[0],"click",function(a){window.open("http://get.adobe.com/flashplayer/","","");a.preventDefault?a.preventDefault():a.returnValue=!1;a.stopPropagation?a.stopPropagation():a.returnValue=!1})},animated:function(c){c=c.parentNode.parentNode;c.childNodes[2].style.marginLeft=c.childNodes[1].offsetWidth+28+"px";c.childNodes[1].innerHTML='<iframe id="sprateIframe" style="-webkit-box-shadow: 0px 3px 10px rgba(0,0,0,.5);-moz-box-shadow: 0px 3px 10px rgba(0,0,0,.5); box-shadow: 0px 3px 10px rgba(0,0,0,.5);" frameborder="0"  width="'+
c.childNodes[1].offsetWidth+'px" height="'+(c.childNodes[1].offsetHeight-3)+'px"  title='+TITLE+' src="'+SPREAD_SRC+'" type="text/html" scrolling="no" marginwidth="0" marginheight="0"></iframe>'}},video={play:function(c,b){blackBG.create();var a=document.createElement("div");a.id="videoPlayer";a.style.position="relative";a.style.margin="5% auto";a.style.minHeight="200px";a.style.minWidth="300px";a.style.maxHeight="85%";a.style.maxWidth="80%";a.style.width="85%";a.style.height="85%";a.style.backgroundColor=
"rgba(0,0,0,1)";document.getElementById("blackBG").appendChild(a);var d=document.createElement("iframe");a.appendChild(d);d.className="youtube-player";d.type="text/html";d.width="100%";d.height="100%";d.frameBorder="0";d.style.display="inline-block";if("YouTube"==c)d.className="youtube-player",d.src="http://www.youtube.com/embed/"+b+"?autoplay=1&html5=1";else if("Vimeo"==c)d.src="http://player.vimeo.com/video/"+b+"?title=0&amp;byline=0&amp;portrait=0&amp;color=da4541"}};BASIC_SRC="";
function initLinks(){var c="png"==COVER_SRC.split(".")[COVER_SRC.split(".").length-1]?"p":"j";if(-1!=document.domain.indexOf("publ.com")){for(var b=document.URL.split("/"),a="",d=0;d<b.length;d++){"bookdata"==a.toLowerCase()&&(PUBL=b[d]);if("seo"==b[d].toLowerCase()||"basic-html"==b[d].toLowerCase())PUBL=a;a=b[d]}BASIC_SRC=decodeURIComponent("http://"+document.domain+"/BookData/"+PUBL+"/basic-html");FULL_SRC=decodeURIComponent("http://"+document.domain+"/session/detectbrowser?returnTo=/"+PUBL);SPREAD_SRC=
decodeURIComponent("http://"+document.domain+"/e/"+PUBL+"?p=1&a=o&f="+c+"&mode=spread&link="+FULL_SRC);try{"undefined"===typeof window.parent.browserDetector&&window.location.replace(FULL_SRC)}catch(f){}}else{var b=window.location.pathname.split("/"),e=FULL_SRC.split("/"),a=window.location.hostname,a=-1!=b[1].indexOf(":")?(browser.name="firefox","file:///"+b[1]):"http://"+a+"/"+b[1];if(1<b.length)for(d=2;d<b.length-e.length;d++)a=a+"/"+b[d];FULL_SRC=decodeURIComponent(a+"/"+e[e.length-1]);if(1<b.length)for(d=
b.length-e.length;d<b.length-1;d++)a=a+"/"+b[d];BASIC_SRC=decodeURIComponent(a);SPREAD_SRC=decodeURIComponent(SPREAD_SRC+"?p=1&a=o&f="+c+"&link="+FULL_SRC)}}
bgCorrection=function(){if(!browser.supportHTML5){var c=document.getElementById("bodyBg"),b=c.currentStyle||window.getComputedStyle(c,null);if("none"!=b.backgroundImage){var a=document.createElement("img");a.src=b.backgroundImage.substr(5,b.backgroundImage.length-7);a.style.position="fixed";a.style.top="0px";a.style.left="0px";a.style.width="100%";a.style.height="100%";c.appendChild(a);c.style.backgroundImage="none"}}};
setEvent=function(c,b,a){browser.supportHTML5?c.addEventListener(b,a,!1):c.attachEvent("on"+b,a,!1)};
function init(){initLinks();browser.detect();workspace.getSize();workspace.addListener(workspace.getSize);browser.supportHTML5?window.addEventListener("resize",workspace.callFn,!1):window.location.pathname.indexOf("index.html")&&window.attachEvent("onresize",workspace.callFn);var c=document.getElementsByTagName("head")[0],b=document.createElement("script");b.id="formPrinter";b.type="text/javascript";b.src=LOCALS_FOLDER+"/"+LANG+"/textlang.js";c.appendChild(b)}
function bindReady(c){function b(){a||(a=!0,setTimeout(c,50))}var a=!1;if(document.addEventListener)document.addEventListener("DOMContentLoaded",function(){b()},!1);else if(document.attachEvent){if(document.documentElement.doScroll&&window==window.top){var d=function(){if(!a&&document.body)try{document.documentElement.doScroll("left"),b()}catch(c){setTimeout(d,0)}};d()}document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&b()})}window.addEventListener?window.addEventListener("load",
b,!1):window.attachEvent?window.attachEvent("onload",b):window.onload=b}bindReady(init);
